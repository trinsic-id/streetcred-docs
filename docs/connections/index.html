<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus">


<title data-react-helmet="true">Connections</title>

<meta data-react-helmet="true" http-equiv="x-ua-compatible" content="ie=edge"><meta data-react-helmet="true" property="og:title" content="Streetcred API Documentation · SSI Resources for Developers"><meta data-react-helmet="true" name="twitter:card" content="summary"><meta data-react-helmet="true" name="description" content="import Tabs from &#x27;@theme/Tabs&#x27;;"><meta data-react-helmet="true" property="og:description" content="import Tabs from &#x27;@theme/Tabs&#x27;;"><meta data-react-helmet="true" property="og:url" content="https://michaeldboyd.github.io/docs/connections">

<link data-react-helmet="true" rel="shortcut icon" href="/img/streetcred_colorful.png">


<link rel="stylesheet" href="/styles.54ce0150.css">

</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}function e(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}var n=window.matchMedia("(prefers-color-scheme: dark)");n.addListener((function(n){null===e()&&t(n.matches?"dark":"")}));var a=e();null!==a?t(a):n.matches&&t("dark")}()</script>
<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a aria-current="page" class="navbar__brand active" href="/"><img class="navbar__logo" src="/img/streetcred_colorful.png" alt="SC"><strong>Streetcred ID</strong></a><a class="navbar__item navbar__link" href="/docs/getting-started">Docs</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/api">API</a><a class="navbar__item navbar__link" target="_blank" rel="noopener noreferrer" href="https://developer.streetcred.id">Portal</a><a class="navbar__item navbar__link" target="_blank" rel="noopener noreferrer" href="https://streetcred.id/contact-us">Support</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a aria-current="page" class="navbar__brand active" href="/"><img class="navbar__logo" src="/img/streetcred_colorful.png" alt="SC"><strong>Streetcred ID</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/getting-started">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/api">API</a></li><li class="menu__list-item"><a class="menu__link" target="_blank" rel="noopener noreferrer" href="https://developer.streetcred.id">Portal</a></li><li class="menu__list-item"><a class="menu__link" target="_blank" rel="noopener noreferrer" href="https://streetcred.id/contact-us">Support</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><div class="docSidebarContainer_1cYp"><div class="sidebar_1kLs"><div class="menu menu--responsive"><button aria-label="Open Menu" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_2vk4" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Getting Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/getting-started">Start Here</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/dev-portal">Developer Portal</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/faq">FAQ</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Guides</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/docs/connections">Connections</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/credentials">Credentials</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/verifications">Verifications</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/organizations">Organizations</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/webhooks">Webhooks</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">API Reference</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/api">Introduction</a></li><li class="menu__list-item"><a activeclassname="menu__link--active" class="menu__link" to="../agency" href="../agency">Agency API</a></li><li class="menu__list-item"><a activeclassname="menu__link--active" class="menu__link" to="../custody" href="../custody">Custodian</a></li></ul></li></ul></div></div></div><main class="docMainContainer_FFX1"><div class="padding-vert--lg"><div class="container"><div class="row"><div class="col"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">Connections</h1></header><div class="markdown"><p>Connections represent a peer-to-peer relationship using a pairwise key exchange. When two parties establish a connection, they can exchange various data messages securely.</p><p>Connections are a set unique pairwise keys that are only used for communication between the parties involved in the connection relationship. Connections are negotiated with an exchange of messages and start with an invitation message.</p><p>In our API, each connection is represened with a <code>connectionId</code> and this identifier is used to reference this connection throughout the different endpoints.</p><blockquote><p>The process of establishing connections is described in <a href="https://github.com/hyperledger/aries-rfcs/tree/master/features/0023-did-exchange">Aries RFC 0023: DID Exchange Protocol 1.0</a></p></blockquote><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="creating-new-connection-invitation"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#creating-new-connection-invitation" title="Direct link to heading">#</a>Creating new connection (invitation)</h2><p>To create a new invitation, call the <code>POST /connections</code> endpoint or use the service clients for your platform.</p><div><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tab-item tabItem_3zTA tab-item--active">C#</li><li role="tab" tabindex="0" aria-selected="false" class="tab-item tabItem_3zTA">Javascript</li></ul><div role="tabpanel" class="margin-vert--md"><div><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-cs codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">var connectionId = await client.CreateConnectionAsync(new ConnectionInvitationParameters());</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="parameters"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#parameters" title="Direct link to heading">#</a>Parameters</h3><p>You can specify the following optional parameters.</p><ul><li><code>connectionId</code> <em>[string optional]</em> - Unique connection identifier. If not specified, a random one will be generated. You can use this field to associate user identifiers with identifers in your internal systems. This can be an email, login, or other unique id.</li><li><code>multiParty</code> <em>[bool optional]</em> - If set to <code>true</code>, the invitation can be used by multiple parties and will always have the status set to <code>Invited</code>.
When a party accepts this invitation, a new connection record with a unique identifier will be created. Default value is <code>false</code>.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="response"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#response" title="Direct link to heading">#</a>Response</h3><p>Creating a connection responds with the same response body as the <a href="https://app.swaggerhub.com/apis-docs/Streetcred/agency/v1#/Connections/GetConnection">GET /Connections/{credentialId} endpoint</a></p><p>(Shown below)</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="api-reference"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#api-reference" title="Direct link to heading">#</a>API Reference</h3><p>Try creating a connection at the <a href="https://app.swaggerhub.com/apis-docs/Streetcred/agency/v1#/Connections/CreateConnection" target="_blank">CreateConnection</a> -
<code>POST /connections</code></p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="retrieving-connections-data"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#retrieving-connections-data" title="Direct link to heading">#</a>Retrieving connections data</h2><p>To get the details of a connection (including invitation details), call the <code>GET /connections/{connectionId}</code> endpoint, by passing the connection identifier you obtained as result when creating new connection.</p><div><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tab-item tabItem_3zTA tab-item--active">C#</li><li role="tab" tabindex="0" aria-selected="false" class="tab-item tabItem_3zTA">Javascript</li></ul><div role="tabpanel" class="margin-vert--md"><div><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-cs codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">var connectionContract = await client.GetConnectionAsync(connectionId);</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="response-1"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#response-1" title="Direct link to heading">#</a>Response</h3><p>The response of this operation is an object of type <code>ConnectionContract</code>. This object contains the following fields</p><table><thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>connectionId</code></td><td><em>string</em></td><td>Unique connection identifier. Can be passed when creating new connection. If not, a randon one is assigned.</td></tr><tr><td><code>state</code></td><td><em>string</em></td><td>The state of the current connections. The value can be <code>Invited</code>, <code>Negotiating</code>, <code>Connected</code>. In order to successfully exchange messages and credentials with a certain connection, it must be in the <code>Connected</code> state. This state will be set automatically when both parties successfully exchange their DIDs.</td></tr><tr><td><code>invitation</code></td><td><em>string</em></td><td>Represents the encoded invitation JSON as Base64 string. You can use this data to encode it into a URL or a QR code. See details below.</td></tr><tr><td><code>invitationUrl</code></td><td><em>string</em></td><td>This is simply a convenience URL that we encoded and shortened. When called, it will resolve (and redirect) to a long form URL that contains the full invitation message. This URL can be presented as QR code as is. Our mobile agent app is able to scan and decode QR codes encoded with this URL.</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="api-reference-1"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#api-reference-1" title="Direct link to heading">#</a>API Reference</h3><a href="https://app.swaggerhub.com/apis-docs/Streetcred/agency/v1#/Connections/GetConnection" target="_blank">GetConnection</a> - `GET /connections/{connectionId}`<h2><a aria-hidden="true" tabindex="-1" class="anchor" id="sending-invitations-to-users"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#sending-invitations-to-users" title="Direct link to heading">#</a>Sending invitations to users</h2><p>There are few ways to send connection invitation to users. They can be sent as a URL link, encoded as QR code, or just JSON. Each approach depends on what the invitee&#x27;s agent is capable of. When the invitee is using a mobile agent, the most common approach is either a QR code or deep link URL.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="encoding-invitations-as-qr-code"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#encoding-invitations-as-qr-code" title="Direct link to heading">#</a>Encoding invitations as QR code</h3><p>To encode the invitation as QR code, a certain direction has been accepted by the community. This approach, however, is not strictly standardized. It will work with the Streetcred mobile app. <br>
QR codes should decode into a URL of the format below</p><p><code>[url_scheme]://[host]?c_i=[invitation_data]</code></p><p>Example:</p><p><code>https://example.com/?c_i=...</code></p><p>A quick and simple way to get a QR code is by using Google Chart API. Simply pass your URL to the Google endpoint</p><p><code>https://chart.googleapis.com/chart?cht=qr&amp;chl=[INVITATION_URL]&amp;chs=200x200&amp;chld=L|1</code></p><p>When mobile apps scan this code, they will look for the query parameter <code>c_i</code> and use the value of this parameter to decode the Base64 Url encoded string into a Connection Invitation Message. The URL scheme and host can be anything. They are generally used as utility to redirect the user to a friendly page that directs the user to download mobile agents. <br>
URL schemes can also be used as deep linking tool, to launch mobile agents directly from the link. This is useful if you&#x27;re developing custom agent apps and would like to support connections and invitations in a convenient user experience.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="using-invitations-with-deep-links"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#using-invitations-with-deep-links" title="Direct link to heading">#</a>Using invitations with deep links</h3><p>To prepare an invitation with a custom deep link URL scheme, simply format the URL</p><p><code>my_custom_scheme://launch/?c_i=[INVITATION_DATA]</code></p><p>The invitation data is retreived from your connection record in the field <code>invitation</code> (not <code>invitationUrl</code>).</p><p>The Streetcred Mobile App uses the following custom deep link URL:
<code>id.streetcred://launch?c_i=[INVITATION_DATA]</code> </p><blockquote><p>If you open the <code>invitationUrl</code> from the connection record from a mobile device, it will try to launch our mobile agent app.</p></blockquote></div></article><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/faq"><h5 class="pagination-nav__link--sublabel">Previous</h5><h4 class="pagination-nav__link--label">« FAQ</h4></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/credentials"><h5 class="pagination-nav__link--sublabel">Next</h5><h4 class="pagination-nav__link--label">Credentials Overview »</h4></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="contents contents__left-border"><li><a href="#creating-new-connection-invitation" class="contents__link">Creating new connection (invitation)</a><ul><li><a href="#parameters" class="contents__link">Parameters</a></li><li><a href="#response" class="contents__link">Response</a></li><li><a href="#api-reference" class="contents__link">API Reference</a></li></ul></li><li><a href="#retrieving-connections-data" class="contents__link">Retrieving connections data</a><ul><li><a href="#response-1" class="contents__link">Response</a></li><li><a href="#api-reference-1" class="contents__link">API Reference</a></li></ul></li><li><a href="#sending-invitations-to-users" class="contents__link">Sending invitations to users</a><ul><li><a href="#encoding-invitations-as-qr-code" class="contents__link">Encoding invitations as QR code</a></li><li><a href="#using-invitations-with-deep-links" class="contents__link">Using invitations with deep links</a></li></ul></li></ul></div></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started">Getting Started</a></li><li class="footer__item"><a aria-current="page" class="footer__link-item active" href="/docs/connections">Connections</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/credentials">Credentials</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/verifications">Verifications</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/webhooks">Webhooks</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://chat.hyperledger.org/channel/aries">Open Source</a></li><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://streetcred.id">Website</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Social</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" to="https://medium.com/streetcred-id" href="https://medium.com/streetcred-id">Blog</a></li><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://github.com/streetcred-id">GitHub</a></li><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://twitter.com/streetcred_id">Twitter</a></li></ul></div></div><div class="text--center">Copyright © 2020 Streetcred ID, Inc.</div></div></footer>
</div>

<script src="/styles.60444a79.js"></script>

<script src="/runtime~main.ced63792.js"></script>

<script src="/main.bece8306.js"></script>

<script src="/1.952253f4.js"></script>

<script src="/2.9271449a.js"></script>

<script src="/1be78505.2fdd8241.js"></script>

<script src="/20ac7829.919fa445.js"></script>

<script src="/17896441.3a54faab.js"></script>

<script src="/99cbbba9.2817a265.js"></script>


</body>
</html>